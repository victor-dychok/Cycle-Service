2024-06-17 14:39:50.456 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 14:39:50.696 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 14:39:50.696 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 14:39:50.697 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 14:39:50.698 +03:00 [INF] Hosting environment: Development
2024-06-17 14:39:50.698 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 14:39:53.109 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 14:39:53.335 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 238.7858ms
2024-06-17 14:39:53.450 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 14:39:53.456 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.6144ms
2024-06-17 14:39:53.463 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 14:39:53.501 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.5359ms
2024-06-17 14:39:53.634 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 14:39:53.749 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 115.9793ms
2024-06-17 14:40:05.460 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/repair-requests - null null
2024-06-17 14:40:06.496 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.GetAll (ServiceCenter.Api)'
2024-06-17 14:40:06.516 +03:00 [INF] Route matched with {action = "GetAll", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(ServiceCenter.Application.Requests.Query.GetAllCenters.GetAllCentersQuery, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 14:40:09.067 +03:00 [ERR] Failed executing DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AdminId], [s].[Location], [s].[Name]
FROM [ServicesCenters] AS [s]
ORDER BY [s].[Id]
2024-06-17 14:40:09.097 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ServiceCenter.Percistance.AppDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AdminId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:ddd68668-052b-4b18-8b8f-cf3ff55a19a0
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AdminId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:ddd68668-052b-4b18-8b8f-cf3ff55a19a0
Error Number:207,State:1,Class:16
2024-06-17 14:40:09.445 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.GetAll (ServiceCenter.Api) in 2926.6451ms
2024-06-17 14:40:09.446 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.GetAll (ServiceCenter.Api)'
2024-06-17 14:40:09.450 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'AdminId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ServiceCenter.Percistance.SqlServerBaseReository`1.GetListAsync(Nullable`1 offset, Nullable`1 limit, Expression`1 predicate, Expression`1 orderBy, Nullable`1 destinct, CancellationToken token) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Percistanse\SqlServerBaseReository.cs:line 59
   at ServiceCenter.Application.Requests.Query.GetAllCenters.GetAllCentersQueryHandler.Handle(GetAllCentersQuery request, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Requests\Query\GetAllCenters\GetAllCentersQueryHandler.cs:line 45
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 20
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 27
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 29
   at ServiceCenter.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ValidationBehavior.cs:line 24
   at ServiceCenter.Api.Controllers.ServiceCenterController.GetAll(GetAllCentersQuery query, IMediator mediator, CancellationToken token) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api\Controllers\ServiceCenterController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:ddd68668-052b-4b18-8b8f-cf3ff55a19a0
Error Number:207,State:1,Class:16
2024-06-17 14:40:09.488 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/repair-requests - 500 null text/plain; charset=utf-8 4028.9403ms
2024-06-17 14:40:42.668 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/service?Name=%D0%97%D0%B0%D0%BC%D0%B5%D0%BD%D0%B0%20%D1%80%D1%83%D0%BB%D0%B5%D0%B2%D0%BE%D0%B9%20%D0%BA%D0%BE%D0%BB%D0%BE%D0%BD%D0%BA%D0%B8&Price=10 - null 0
2024-06-17 14:40:42.682 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api)'
2024-06-17 14:40:42.685 +03:00 [INF] Route matched with {action = "CreateService", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateService(ServiceCenter.Application.Requests.Comands.CreateService.CreateServiceCommand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 14:40:42.974 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Services] ([Name], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-06-17 14:40:42.999 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ServiceCenter.Percistance.AppDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Services_ServicesCenters_ServiceCenterId". The conflict occurred in database "CycleServiceDB", table "dbo.ServicesCenters", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ddd68668-052b-4b18-8b8f-cf3ff55a19a0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Services_ServicesCenters_ServiceCenterId". The conflict occurred in database "CycleServiceDB", table "dbo.ServicesCenters", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ddd68668-052b-4b18-8b8f-cf3ff55a19a0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-17 14:40:43.280 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api) in 594.3055ms
2024-06-17 14:40:43.280 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api)'
2024-06-17 14:40:43.281 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Services_ServicesCenters_ServiceCenterId". The conflict occurred in database "CycleServiceDB", table "dbo.ServicesCenters", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ddd68668-052b-4b18-8b8f-cf3ff55a19a0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ServiceCenter.Percistance.SqlServerBaseReository`1.AddAsync(TEntity item, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Percistanse\SqlServerBaseReository.cs:line 32
   at ServiceCenter.Application.Requests.Comands.CreateService.CreateServiceCommandHandler.Handle(CreateServiceCommand request, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Requests\Comands\CreateService\CreateServiceCommandHandler.cs:line 37
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 20
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 27
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 29
   at ServiceCenter.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ValidationBehavior.cs:line 24
   at ServiceCenter.Api.Controllers.ServiceCenterController.CreateService(CreateServiceCommand comand, IMediator mediator, CancellationToken token) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api\Controllers\ServiceCenterController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-17 14:40:43.288 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/service?Name=%D0%97%D0%B0%D0%BC%D0%B5%D0%BD%D0%B0%20%D1%80%D1%83%D0%BB%D0%B5%D0%B2%D0%BE%D0%B9%20%D0%BA%D0%BE%D0%BB%D0%BE%D0%BD%D0%BA%D0%B8&Price=10 - 500 null text/plain; charset=utf-8 623.7124ms
2024-06-17 15:07:51.553 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:07:51.804 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:07:51.804 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:07:51.805 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:07:51.806 +03:00 [INF] Hosting environment: Development
2024-06-17 15:07:51.806 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:07:52.472 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:07:52.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 232.101ms
2024-06-17 15:07:52.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:07:52.713 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.8718ms
2024-06-17 15:07:52.718 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:07:52.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.4453ms
2024-06-17 15:07:52.884 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:07:52.978 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 93.9513ms
2024-06-17 15:13:28.023 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:13:28.341 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:13:28.342 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:13:28.343 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:13:28.343 +03:00 [INF] Hosting environment: Development
2024-06-17 15:13:28.343 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:13:28.695 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:13:28.929 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 237.9343ms
2024-06-17 15:13:28.936 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:13:28.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.2275ms
2024-06-17 15:13:28.950 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:13:28.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.1471ms
2024-06-17 15:13:29.202 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:13:29.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.2277ms
2024-06-17 15:13:32.977 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/repair-requests - null null
2024-06-17 15:13:33.748 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.GetAll (ServiceCenter.Api)'
2024-06-17 15:13:33.770 +03:00 [INF] Route matched with {action = "GetAll", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(ServiceCenter.Application.Requests.Query.GetAllCenters.GetAllCentersQuery, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:13:35.849 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AdminId], [s].[Location], [s].[Name]
FROM [ServicesCenters] AS [s]
ORDER BY [s].[Id]
2024-06-17 15:13:35.896 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ServiceCenter.Application.dto.ServiceCenterDto, ServiceCenter.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-17 15:13:35.908 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.GetAll (ServiceCenter.Api) in 2134.2544ms
2024-06-17 15:13:35.908 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.GetAll (ServiceCenter.Api)'
2024-06-17 15:13:35.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/repair-requests - 200 null application/json; charset=utf-8 2937.2079ms
2024-06-17 15:16:33.255 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:16:33.533 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:16:33.533 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:16:33.534 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:16:33.534 +03:00 [INF] Hosting environment: Development
2024-06-17 15:16:33.534 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:16:34.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:16:34.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 188.9301ms
2024-06-17 15:16:34.438 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:16:34.444 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.312ms
2024-06-17 15:16:34.451 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:16:34.486 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.6379ms
2024-06-17 15:16:34.597 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:16:34.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 89.5375ms
2024-06-17 15:17:15.082 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/service?Name=sfsfsd&Price=10.5 - null 0
2024-06-17 15:17:15.237 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api)'
2024-06-17 15:17:15.258 +03:00 [INF] Route matched with {action = "CreateService", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateService(ServiceCenter.Application.Requests.Comands.CreateService.CreateServiceCommand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:17:16.684 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Services] ([Name], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-06-17 15:17:16.747 +03:00 [INF] Executing OkObjectResult, writing value of type 'ServiceCenter.Application.dto.ServiceDto'.
2024-06-17 15:17:16.766 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api) in 1504.105ms
2024-06-17 15:17:16.766 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api)'
2024-06-17 15:17:16.773 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/service?Name=sfsfsd&Price=10.5 - 200 null application/json; charset=utf-8 1691.6588ms
2024-06-17 15:37:55.384 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:37:55.513 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:37:55.514 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:37:55.515 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:37:55.515 +03:00 [INF] Hosting environment: Development
2024-06-17 15:37:55.515 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:37:56.300 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:37:56.468 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 169.0887ms
2024-06-17 15:37:56.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:37:56.626 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 2.5988ms
2024-06-17 15:37:56.631 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:37:56.653 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.7982ms
2024-06-17 15:37:56.774 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:37:56.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 89.3368ms
2024-06-17 15:38:19.586 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/service?Name=dsdsf&Price=10.5 - null 0
2024-06-17 15:38:19.645 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api)'
2024-06-17 15:38:19.660 +03:00 [INF] Route matched with {action = "CreateService", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateService(ServiceCenter.Application.Requests.Comands.CreateService.CreateServiceCommand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:38:20.569 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Services] ([Name], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-06-17 15:38:20.613 +03:00 [INF] Executing OkObjectResult, writing value of type 'ServiceCenter.Application.dto.ServiceDto'.
2024-06-17 15:38:20.624 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api) in 961.0343ms
2024-06-17 15:38:20.624 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api)'
2024-06-17 15:38:20.630 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/service?Name=dsdsf&Price=10.5 - 200 null application/json; charset=utf-8 1044.1077ms
2024-06-17 15:38:27.813 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/service?Name=sdsdfs&Price=9.99 - null 0
2024-06-17 15:38:27.816 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api)'
2024-06-17 15:38:27.817 +03:00 [INF] Route matched with {action = "CreateService", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateService(ServiceCenter.Application.Requests.Comands.CreateService.CreateServiceCommand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:38:27.835 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Services] ([Name], [Price])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-06-17 15:38:27.837 +03:00 [INF] Executing OkObjectResult, writing value of type 'ServiceCenter.Application.dto.ServiceDto'.
2024-06-17 15:38:27.837 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api) in 20.7521ms
2024-06-17 15:38:27.838 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateService (ServiceCenter.Api)'
2024-06-17 15:38:27.838 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/service?Name=sdsdfs&Price=9.99 - 200 null application/json; charset=utf-8 24.716ms
2024-06-17 15:38:55.044 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=sdcsdcs&Location=sdcscsscss&AdminId=3 - null 0
2024-06-17 15:38:55.047 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:38:55.051 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:38:55.124 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ServicesCenters] ([AdminId], [Location], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-06-17 15:38:55.128 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api) in 76.584ms
2024-06-17 15:38:55.128 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:38:55.129 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
AsyncStateMachineBox`1 -> ServiceCenterDto
System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ServiceCenter.Domain.ServiceCenterEntity, ServiceCenter.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ServiceCenter.Percistance.SqlServerBaseReository`1+<AddAsync>d__4[[ServiceCenter.Domain.ServiceCenterEntity, ServiceCenter.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ServiceCenter.Percistanse, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> ServiceCenter.Application.dto.ServiceCenterDto
   at lambda_method138(Closure, Object, ServiceCenterDto, ResolutionContext)
   at ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComandHandler.Handle(CreateCenterComand request, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Requests\Comands\CreateCenter\CreateCenterComandHandler.cs:line 56
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 20
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 27
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 29
   at ServiceCenter.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ValidationBehavior.cs:line 24
   at ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter(CreateCenterComand comand, IMediator mediator, CancellationToken token) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api\Controllers\ServiceCenterController.cs:line 45
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-17 15:38:55.157 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/center?Name=sdcsdcs&Location=sdcscsscss&AdminId=3 - 500 null text/plain; charset=utf-8 112.7654ms
2024-06-17 15:40:12.821 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:40:13.091 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:40:13.092 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:40:13.093 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:40:13.093 +03:00 [INF] Hosting environment: Development
2024-06-17 15:40:13.094 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:40:13.636 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:40:13.841 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 210.429ms
2024-06-17 15:40:13.859 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:40:13.859 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:40:13.865 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.2138ms
2024-06-17 15:40:13.894 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.0995ms
2024-06-17 15:40:14.000 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:40:14.100 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 99.9277ms
2024-06-17 15:40:48.996 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:40:49.261 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:40:49.262 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:40:49.263 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:40:49.263 +03:00 [INF] Hosting environment: Development
2024-06-17 15:40:49.263 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:40:49.644 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:40:49.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 224.3086ms
2024-06-17 15:40:49.869 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:40:49.874 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 4.733ms
2024-06-17 15:40:49.883 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:40:49.919 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.109ms
2024-06-17 15:40:50.032 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:40:50.129 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 96.7618ms
2024-06-17 15:41:09.436 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=dfvfdvd&Location=vfdvdfvdfvfd&AdminId=3 - null 0
2024-06-17 15:41:09.553 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:41:09.573 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:41:10.788 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ServicesCenters] ([AdminId], [Location], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-06-17 15:41:10.841 +03:00 [INF] Executing OkObjectResult, writing value of type 'ServiceCenter.Application.dto.ServiceCenterDto'.
2024-06-17 15:41:10.853 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api) in 1277.4521ms
2024-06-17 15:41:10.853 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:41:10.859 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/center?Name=dfvfdvd&Location=vfdvdfvdfvfd&AdminId=3 - 200 null application/json; charset=utf-8 1422.7548ms
2024-06-17 15:41:17.614 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=dfvfdvd&Location=vfdvdfvdfvfd&AdminId=5 - null 0
2024-06-17 15:41:17.622 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:41:17.623 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:41:17.652 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ServicesCenters] ([AdminId], [Location], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-06-17 15:41:17.653 +03:00 [INF] Executing OkObjectResult, writing value of type 'ServiceCenter.Application.dto.ServiceCenterDto'.
2024-06-17 15:41:17.654 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api) in 30.5139ms
2024-06-17 15:41:17.654 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:41:17.654 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/center?Name=dfvfdvd&Location=vfdvdfvdfvfd&AdminId=5 - 200 null application/json; charset=utf-8 40.1506ms
2024-06-17 15:41:25.762 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=dfvfdvd&Location=vfdvdfvdfvfd&AdminId=4 - null 0
2024-06-17 15:41:25.765 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:41:25.765 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:41:25.828 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ServicesCenters] ([AdminId], [Location], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-06-17 15:41:25.857 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ServiceCenter.Percistance.AppDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ServicesCenters_Users_AdminId". The conflict occurred in database "CycleServiceDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b71f791c-595e-4f55-9b8a-0fa29056252f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ServicesCenters_Users_AdminId". The conflict occurred in database "CycleServiceDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b71f791c-595e-4f55-9b8a-0fa29056252f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-17 15:41:26.155 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api) in 389.9086ms
2024-06-17 15:41:26.156 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:41:26.158 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ServicesCenters_Users_AdminId". The conflict occurred in database "CycleServiceDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b71f791c-595e-4f55-9b8a-0fa29056252f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ServiceCenter.Percistance.SqlServerBaseReository`1.AddAsync(TEntity item, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Percistanse\SqlServerBaseReository.cs:line 32
   at ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComandHandler.Handle(CreateCenterComand request, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Requests\Comands\CreateCenter\CreateCenterComandHandler.cs:line 54
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 20
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 27
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 29
   at ServiceCenter.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ValidationBehavior.cs:line 24
   at ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter(CreateCenterComand comand, IMediator mediator, CancellationToken token) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api\Controllers\ServiceCenterController.cs:line 45
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-17 15:41:26.185 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/center?Name=dfvfdvd&Location=vfdvdfvdfvfd&AdminId=4 - 500 null text/plain; charset=utf-8 423.6444ms
2024-06-17 15:45:46.822 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:45:47.172 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:45:47.173 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:45:47.176 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:45:47.177 +03:00 [INF] Hosting environment: Development
2024-06-17 15:45:47.177 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:45:47.848 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:45:48.057 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 215.6465ms
2024-06-17 15:45:48.076 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:45:48.087 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 11.5635ms
2024-06-17 15:45:48.100 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:45:48.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.2612ms
2024-06-17 15:45:48.367 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:45:48.476 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.4353ms
2024-06-17 15:46:10.507 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vvdfdf&Location=vdfvdfvdfvd&AdminId=5 - null 0
2024-06-17 15:46:10.627 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:46:10.646 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:46:11.980 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__request_AdminId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_AdminId_0
2024-06-17 15:46:12.049 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Center Admin'
2024-06-17 15:46:12.069 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ServiceCenter.Percistance.AppDBContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-06-17 15:46:12.359 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api) in 1710.1976ms
2024-06-17 15:46:12.360 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:46:12.363 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at ServiceCenter.Percistance.SqlServerBaseReository`1.SingleOrDefaultAsync(Expression`1 predicate, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Percistanse\SqlServerBaseReository.cs:line 20
   at ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComandHandler.Handle(CreateCenterComand request, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Requests\Comands\CreateCenter\CreateCenterComandHandler.cs:line 52
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 20
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 27
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 29
   at ServiceCenter.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ValidationBehavior.cs:line 24
   at ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter(CreateCenterComand comand, IMediator mediator, CancellationToken token) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api\Controllers\ServiceCenterController.cs:line 45
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-17 15:46:12.401 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vvdfdf&Location=vdfvdfvdfvd&AdminId=5 - 500 null text/plain; charset=utf-8 1895.0609ms
2024-06-17 15:46:33.543 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:46:33.835 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:46:33.835 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:46:33.836 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:46:33.836 +03:00 [INF] Hosting environment: Development
2024-06-17 15:46:33.836 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:46:34.239 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:46:34.473 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 236.4702ms
2024-06-17 15:46:34.484 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:46:34.493 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.8851ms
2024-06-17 15:46:34.505 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:46:34.552 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.7123ms
2024-06-17 15:46:34.678 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:46:34.775 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.0265ms
2024-06-17 15:46:47.959 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vfdvdfvd&Location=vdvdvd&AdminId=5 - null 0
2024-06-17 15:46:48.080 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:46:48.101 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:46:49.444 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__request_AdminId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_AdminId_0
2024-06-17 15:46:54.068 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Center Admin'
2024-06-17 15:47:35.041 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:47:35.310 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:47:35.310 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:47:35.312 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:47:35.312 +03:00 [INF] Hosting environment: Development
2024-06-17 15:47:35.312 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:47:35.721 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:47:35.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 208.6274ms
2024-06-17 15:47:35.941 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:47:35.951 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 9.8702ms
2024-06-17 15:47:35.957 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:47:36.011 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.5702ms
2024-06-17 15:47:36.116 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:47:36.217 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 101.6173ms
2024-06-17 15:47:49.425 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vdfvdf&Location=dfvdvdv&AdminId=5 - null 0
2024-06-17 15:47:49.546 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:47:49.566 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:47:50.901 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__request_AdminId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_AdminId_0
2024-06-17 15:47:50.976 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Center Admin'
2024-06-17 15:47:50.992 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__centerAdmin_Id_0='?' (DbType = Int32), @__CenterAdminRole_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
WHERE [a].[UserId] = @__centerAdmin_Id_0 AND [a].[RoleId] = @__CenterAdminRole_Id_1
2024-06-17 15:47:51.240 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api) in 1671.4726ms
2024-06-17 15:47:51.241 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:47:51.244 +03:00 [ERR] An unhandled exception has occurred while executing the request.
ServiceCenter.Service.Exeptions.BadRequestExeption: User dose not have a Admin role
   at ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComandHandler.Handle(CreateCenterComand request, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Requests\Comands\CreateCenter\CreateCenterComandHandler.cs:line 64
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 20
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 27
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 29
   at ServiceCenter.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ValidationBehavior.cs:line 24
   at ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter(CreateCenterComand comand, IMediator mediator, CancellationToken token) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api\Controllers\ServiceCenterController.cs:line 45
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-17 15:47:51.287 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vdfvdf&Location=dfvdvdv&AdminId=5 - 500 null text/plain; charset=utf-8 1862.0901ms
2024-06-17 15:49:35.820 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-17 15:49:36.117 +03:00 [INF] Now listening on: https://localhost:7251
2024-06-17 15:49:36.117 +03:00 [INF] Now listening on: http://localhost:5094
2024-06-17 15:49:36.119 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-17 15:49:36.119 +03:00 [INF] Hosting environment: Development
2024-06-17 15:49:36.119 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api
2024-06-17 15:49:36.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/index.html - null null
2024-06-17 15:49:36.731 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/index.html - 200 null text/html;charset=utf-8 219.3966ms
2024-06-17 15:49:36.759 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - null null
2024-06-17 15:49:36.759 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/_vs/browserLink - null null
2024-06-17 15:49:36.764 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.2775ms
2024-06-17 15:49:36.805 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.7732ms
2024-06-17 15:49:36.934 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - null null
2024-06-17 15:49:37.066 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7251/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 132.1768ms
2024-06-17 15:49:50.823 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vdfvdfvd&Location=vdfvdfd&AdminId=5 - null 0
2024-06-17 15:49:50.942 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:49:50.961 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:49:52.272 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_AdminId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_AdminId_0
2024-06-17 15:49:52.344 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Center Admin'
2024-06-17 15:49:52.359 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__centerAdmin_Id_0='?' (DbType = Int32), @__CenterAdminRole_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
WHERE [a].[UserId] = @__centerAdmin_Id_0 AND [a].[RoleId] = @__CenterAdminRole_Id_1
2024-06-17 15:49:52.605 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api) in 1640.9634ms
2024-06-17 15:49:52.606 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:49:52.609 +03:00 [ERR] An unhandled exception has occurred while executing the request.
ServiceCenter.Service.Exeptions.BadRequestExeption: User dose not have a Center Admin role
   at ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComandHandler.Handle(CreateCenterComand request, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Requests\Comands\CreateCenter\CreateCenterComandHandler.cs:line 58
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 20
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 27
   at ServiceCenter.Application.Behaviors.ContextTransactionBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ContextTransactionBehavior.cs:line 29
   at ServiceCenter.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Application\Behaviors\ValidationBehavior.cs:line 24
   at ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter(CreateCenterComand comand, IMediator mediator, CancellationToken token) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\ServiceCenterMicroservice\ServiceCenter.Api\Controllers\ServiceCenterController.cs:line 45
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-17 15:49:52.647 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vdfvdfvd&Location=vdfvdfd&AdminId=5 - 500 null text/plain; charset=utf-8 1824.9768ms
2024-06-17 15:50:01.651 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vdfvdfvd&Location=vdfvdfd&AdminId=3 - null 0
2024-06-17 15:50:01.654 +03:00 [INF] Executing endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:50:01.655 +03:00 [INF] Route matched with {action = "CreateCenter", controller = "ServiceCenter"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCenter(ServiceCenter.Application.Requests.Comands.CreateCenter.CreateCenterComand, MediatR.IMediator, System.Threading.CancellationToken) on controller ServiceCenter.Api.Controllers.ServiceCenterController (ServiceCenter.Api).
2024-06-17 15:50:01.682 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_AdminId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_AdminId_0
2024-06-17 15:50:01.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Center Admin'
2024-06-17 15:50:01.685 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__centerAdmin_Id_0='?' (DbType = Int32), @__CenterAdminRole_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
WHERE [a].[UserId] = @__centerAdmin_Id_0 AND [a].[RoleId] = @__CenterAdminRole_Id_1
2024-06-17 15:50:01.821 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ServicesCenters] ([AdminId], [Location], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-06-17 15:50:01.850 +03:00 [INF] Executing OkObjectResult, writing value of type 'ServiceCenter.Application.dto.ServiceCenterDto'.
2024-06-17 15:50:01.860 +03:00 [INF] Executed action ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api) in 204.4918ms
2024-06-17 15:50:01.860 +03:00 [INF] Executed endpoint 'ServiceCenter.Api.Controllers.ServiceCenterController.CreateCenter (ServiceCenter.Api)'
2024-06-17 15:50:01.860 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7251/repair-requests/center?Name=vdfvdfvd&Location=vdfvdfd&AdminId=3 - 200 null application/json; charset=utf-8 209.2039ms
