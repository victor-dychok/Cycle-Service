2024-06-25 14:28:08.302 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-25 14:28:08.431 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-25 14:28:08.431 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-25 14:28:08.432 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-25 14:28:08.432 +03:00 [INF] Hosting environment: Development
2024-06-25 14:28:08.432 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-25 14:28:13.403 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-25 14:28:13.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 179.82ms
2024-06-25 14:28:13.612 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-25 14:28:13.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 4.4981ms
2024-06-25 14:28:13.622 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-25 14:28:13.648 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.9687ms
2024-06-25 14:28:13.873 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-25 14:28:13.946 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.0651ms
2024-06-25 14:28:18.973 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-25 14:28:18.981 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 8.6026ms
2024-06-25 14:28:18.998 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-25 14:28:18.999 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 0.8306ms
2024-06-25 14:28:19.015 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-25 14:28:19.027 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.7691ms
2024-06-25 14:28:19.144 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-25 14:28:19.146 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2.0377ms
2024-06-25 14:28:30.381 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - null 0
2024-06-25 14:28:30.403 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-25 14:28:30.421 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-25 14:28:31.304 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Admin'
2024-06-25 14:28:31.666 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUserRole] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-25 14:28:31.696 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__adminRole_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
WHERE [a].[RoleId] = @__adminRole_Id_0
2024-06-25 14:28:31.722 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Login], [PasswordHash], [Phone])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-06-25 14:28:31.747 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUserAppRole] ([RoleId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-06-25 14:28:31.762 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-25 14:28:31.829 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-25 14:28:31.838 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-25 14:28:31.952 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-25 14:28:31.961 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-25 14:28:31.975 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 1552.3165ms
2024-06-25 14:28:31.976 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-25 14:28:31.980 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - 200 null application/json; charset=utf-8 1599.4591ms
2024-06-25 14:28:49.878 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-06-25 14:28:49.920 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-06-25 14:28:49.924 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-25 14:28:50.156 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_Id_0
2024-06-25 14:28:50.161 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.GetUserDto'.
2024-06-25 14:28:50.164 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 240.4893ms
2024-06-25 14:28:50.164 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-06-25 14:28:50.164 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 286.051ms
2024-06-25 19:44:25.721 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-25 19:44:25.933 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-25 19:44:25.933 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-25 19:44:25.934 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-25 19:44:25.935 +03:00 [INF] Hosting environment: Development
2024-06-25 19:44:25.935 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-25 19:44:26.345 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-25 19:44:26.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 206.9647ms
2024-06-25 19:44:26.557 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-25 19:44:26.561 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 3.9905ms
2024-06-25 19:44:26.569 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-25 19:44:26.610 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.3002ms
2024-06-25 19:44:26.698 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-25 19:44:26.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.1997ms
2024-06-25 19:45:42.517 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - null 0
2024-06-25 19:45:43.535 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-25 19:45:43.557 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-25 19:45:45.802 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Admin'
2024-06-25 19:45:45.931 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__adminRole_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
WHERE [a].[RoleId] = @__adminRole_Id_0
2024-06-25 19:45:45.964 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-25 19:45:46.021 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-25 19:45:46.027 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-25 19:45:46.159 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-25 19:45:46.181 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-25 19:45:46.196 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 2636.2829ms
2024-06-25 19:45:46.196 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-25 19:45:46.201 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - 200 null application/json; charset=utf-8 3684.7008ms
2024-06-25 19:46:13.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-06-25 19:46:13.305 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-06-25 19:46:13.309 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-25 19:46:13.423 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_Id_0
2024-06-25 19:46:13.428 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.GetUserDto'.
2024-06-25 19:46:13.431 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 122.5519ms
2024-06-25 19:46:13.431 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-06-25 19:46:13.431 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 167.0359ms
