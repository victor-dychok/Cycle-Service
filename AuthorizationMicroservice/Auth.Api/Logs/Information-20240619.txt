2024-06-19 12:24:25.537 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 12:24:25.709 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 12:24:25.709 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 12:24:25.710 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 12:24:25.711 +03:00 [INF] Hosting environment: Development
2024-06-19 12:24:25.711 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 12:24:26.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 12:24:26.371 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 209.8065ms
2024-06-19 12:24:26.383 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-19 12:24:26.387 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 3.5853ms
2024-06-19 12:24:26.401 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-19 12:24:26.478 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.3336ms
2024-06-19 12:24:26.629 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-19 12:24:26.706 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 76.9725ms
2024-06-19 12:24:39.278 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 12:24:40.118 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 12:24:40.137 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 12:24:43.536 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 12:24:43.670 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 12:24:43.693 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:24:43.704 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:24:43.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:24:43.836 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 12:24:43.856 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 12:24:43.863 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 3723.4234ms
2024-06-19 12:24:43.864 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 12:24:43.869 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 4591.232ms
2024-06-19 12:43:34.609 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 12:43:34.612 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 12:43:34.613 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 12:43:35.621 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 12:43:35.626 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 12:43:35.630 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:43:35.631 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:43:35.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:43:35.637 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 12:43:35.639 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 12:43:35.639 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 1025.8346ms
2024-06-19 12:43:35.639 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 12:43:35.639 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 1030.3076ms
2024-06-19 12:51:37.240 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 12:51:37.245 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 12:51:37.246 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 12:51:37.327 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 12:51:37.490 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 12:51:37.494 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:51:37.495 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:51:37.496 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 12:51:37.500 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 12:51:37.500 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 12:51:37.500 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 254.2602ms
2024-06-19 12:51:37.501 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 12:51:37.501 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 260.5781ms
2024-06-19 13:11:37.615 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 13:11:37.616 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:11:37.616 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 13:11:38.527 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 13:11:38.530 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 13:11:38.533 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:11:38.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:11:38.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:11:38.538 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 13:11:38.538 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 13:11:38.538 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 921.9975ms
2024-06-19 13:11:38.538 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:11:38.538 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 923.0759ms
2024-06-19 13:13:43.653 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 51
2024-06-19 13:13:43.654 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:13:43.654 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 13:13:43.657 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 13:13:43.658 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 13:13:43.660 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:13:43.661 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:13:43.664 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 13:13:43.665 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 13:13:43.665 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 10.8332ms
2024-06-19 13:13:43.665 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:13:43.665 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 11.6448ms
2024-06-19 13:20:00.324 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 51
2024-06-19 13:20:00.325 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:20:00.325 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 13:20:00.390 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 13:20:00.393 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 13:20:00.395 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:20:00.396 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:20:00.400 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 13:20:00.400 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 13:20:00.401 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 75.7518ms
2024-06-19 13:20:00.401 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:20:00.401 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 76.7936ms
2024-06-19 13:24:30.456 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 51
2024-06-19 13:24:30.457 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:24:30.457 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 13:24:30.535 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 13:24:30.540 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 13:24:30.543 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:24:30.544 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:24:30.549 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 13:24:30.549 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 13:24:30.550 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 92.7428ms
2024-06-19 13:24:30.550 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:24:30.550 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 93.7491ms
2024-06-19 13:36:07.443 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 13:36:07.443 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:36:07.443 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 13:36:07.519 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 13:36:07.522 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 13:36:07.525 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:36:07.526 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:36:07.526 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:36:07.529 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 13:36:07.529 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 13:36:07.529 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 85.943ms
2024-06-19 13:36:07.529 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:36:07.529 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 86.7763ms
2024-06-19 13:44:19.443 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 13:44:19.444 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:44:19.444 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 13:44:19.517 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 13:44:19.520 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 13:44:19.522 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:44:19.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:44:19.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:44:19.527 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 13:44:19.527 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 13:44:19.527 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 83.3765ms
2024-06-19 13:44:19.527 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:44:19.528 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 84.1014ms
2024-06-19 13:45:37.239 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 13:45:37.239 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:45:37.239 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 13:45:37.245 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 13:45:37.248 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 13:45:37.250 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:45:37.251 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:45:37.253 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:45:37.258 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 13:45:37.259 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 13:45:37.259 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 19.8433ms
2024-06-19 13:45:37.259 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:45:37.260 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 20.5027ms
2024-06-19 13:57:29.081 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 13:57:29.215 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 13:57:29.215 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 13:57:29.216 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 13:57:29.217 +03:00 [INF] Hosting environment: Development
2024-06-19 13:57:29.217 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 13:57:29.575 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 13:57:29.716 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 140.772ms
2024-06-19 13:57:29.726 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-19 13:57:29.729 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 3.1446ms
2024-06-19 13:57:29.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-19 13:57:29.764 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.7641ms
2024-06-19 13:57:29.984 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-19 13:57:30.072 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.4407ms
2024-06-19 13:57:42.307 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 13:57:42.475 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:57:42.492 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 13:57:44.613 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 13:57:44.709 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 13:57:44.730 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:57:44.740 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:57:44.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 13:57:44.841 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 13:57:44.861 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 13:57:44.868 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 2373.5145ms
2024-06-19 13:57:44.868 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 13:57:44.873 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 2566.2826ms
2024-06-19 14:00:57.047 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 14:00:57.053 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 14:00:57.054 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 14:00:57.118 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 14:00:57.123 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 14:00:57.126 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 14:00:57.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 14:00:57.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 14:00:57.136 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 14:00:57.137 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 14:00:57.138 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 83.8647ms
2024-06-19 14:00:57.138 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 14:00:57.138 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 90.9501ms
2024-06-19 14:05:37.576 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 14:05:37.826 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 14:05:37.826 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 14:05:37.827 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 14:05:37.828 +03:00 [INF] Hosting environment: Development
2024-06-19 14:05:37.828 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 14:05:38.223 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 14:05:38.518 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 301.3083ms
2024-06-19 14:05:38.528 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-19 14:05:38.536 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 7.7592ms
2024-06-19 14:05:38.546 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-19 14:05:38.581 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.2187ms
2024-06-19 14:05:38.686 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-19 14:05:38.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 105.2438ms
2024-06-19 14:05:49.200 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 50
2024-06-19 14:05:49.382 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 14:05:49.402 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 14:05:51.159 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 14:05:51.273 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 14:05:51.299 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 14:05:51.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 14:05:51.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 14:05:51.432 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 14:05:51.457 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 14:05:51.466 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 2060.9675ms
2024-06-19 14:05:51.466 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 14:05:51.473 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 2273.1137ms
2024-06-19 14:06:06.047 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-06-19 14:06:06.092 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-06-19 14:06:06.095 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 14:06:06.315 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_Id_0
2024-06-19 14:06:06.321 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.GetUserDto'.
2024-06-19 14:06:06.322 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 227.001ms
2024-06-19 14:06:06.322 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-06-19 14:06:06.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 275.6397ms
2024-06-19 16:35:03.725 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 16:35:04.022 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 16:35:04.022 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 16:35:04.023 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 16:35:04.023 +03:00 [INF] Hosting environment: Development
2024-06-19 16:35:04.023 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 16:35:04.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 16:35:06.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 404 0 null 1888.7005ms
2024-06-19 16:35:06.667 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7104/swagger/index.html, Response status code: 404
2024-06-19 16:35:25.218 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 16:35:25.499 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 16:35:25.499 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 16:35:25.500 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 16:35:25.501 +03:00 [INF] Hosting environment: Development
2024-06-19 16:35:25.501 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 16:35:26.086 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 16:35:26.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 404 0 null 206.6862ms
2024-06-19 16:35:26.290 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7104/swagger/index.html, Response status code: 404
2024-06-19 16:36:42.037 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 16:36:42.414 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 16:36:42.414 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 16:36:42.415 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 16:36:42.416 +03:00 [INF] Hosting environment: Development
2024-06-19 16:36:42.416 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 16:36:43.021 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 16:36:43.206 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 404 0 null 189.7301ms
2024-06-19 16:36:43.207 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7104/swagger/index.html, Response status code: 404
2024-06-19 16:38:44.418 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 16:38:44.710 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 16:38:44.710 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 16:38:44.711 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 16:38:44.711 +03:00 [INF] Hosting environment: Development
2024-06-19 16:38:44.711 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 16:38:45.061 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 16:38:45.277 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 219.2622ms
2024-06-19 16:38:45.287 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-19 16:38:45.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 6.5138ms
2024-06-19 16:38:45.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-19 16:38:45.371 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.5079ms
2024-06-19 16:38:45.465 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-19 16:38:45.557 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.6364ms
2024-06-19 16:38:58.891 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - null 0
2024-06-19 16:38:58.958 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 16:38:58.984 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 16:38:59.096 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-19 16:38:59.114 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 126.325ms
2024-06-19 16:38:59.114 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 16:38:59.114 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - 400 null application/problem+json; charset=utf-8 222.8201ms
2024-06-19 16:39:38.073 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 16:39:38.382 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 16:39:38.382 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 16:39:38.384 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 16:39:38.384 +03:00 [INF] Hosting environment: Development
2024-06-19 16:39:38.384 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 16:39:39.033 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 16:39:39.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 221.9689ms
2024-06-19 16:39:39.261 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-19 16:39:39.267 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 6.0314ms
2024-06-19 16:39:39.275 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-19 16:39:39.316 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.1019ms
2024-06-19 16:39:39.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-19 16:39:39.502 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.3957ms
2024-06-19 16:39:49.035 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - null 0
2024-06-19 16:39:49.098 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 16:39:49.119 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 16:39:51.574 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Admin'
2024-06-19 16:39:51.708 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__adminRole_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
WHERE [a].[RoleId] = @__adminRole_Id_0
2024-06-19 16:39:51.824 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Login], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-06-19 16:39:51.869 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Authorization.Percistance.DockerComposeDemoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Phone', table 'CycleServiceDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d41f6c0d-2ab9-4d0b-89ec-df1aac6db8fb
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Phone', table 'CycleServiceDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d41f6c0d-2ab9-4d0b-89ec-df1aac6db8fb
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-19 16:39:52.074 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 2951.8413ms
2024-06-19 16:39:52.075 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 16:39:52.079 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Phone', table 'CycleServiceDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d41f6c0d-2ab9-4d0b-89ec-df1aac6db8fb
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Authorization.Percistance.SqlServerBaseReository`1.AddAsync(TEntity item, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Authorization.Percistance\SqlServerBaseReository.cs:line 32
   at Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenRequestHandler.Handle(CreateJwtTokenComand request, CancellationToken cancellationToken) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Authorization.Application\Requests\Comands\CreateJwtToken\CreateJwtTokenRequestHandler.cs:line 56
   at UserAPI.Controllers.AuthController.Post(CreateJwtTokenComand comand, IMediator mediator, CancellationToken cancellation) in D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api\Controllers\AuthController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-19 16:39:52.119 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - 500 null text/plain; charset=utf-8 3083.4099ms
2024-06-19 16:42:39.967 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-19 16:42:40.285 +03:00 [INF] Now listening on: https://localhost:7104
2024-06-19 16:42:40.285 +03:00 [INF] Now listening on: http://localhost:5148
2024-06-19 16:42:40.286 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-19 16:42:40.286 +03:00 [INF] Hosting environment: Development
2024-06-19 16:42:40.286 +03:00 [INF] Content root path: D:\учёба\курсы ITA\Cycle Service\Cycle Service\AuthorizationMicroservice\Auth.Api
2024-06-19 16:42:40.573 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-06-19 16:42:40.834 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 265.6677ms
2024-06-19 16:42:40.844 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-06-19 16:42:40.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 5.1189ms
2024-06-19 16:42:40.857 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-06-19 16:42:40.903 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.9402ms
2024-06-19 16:42:41.034 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-06-19 16:42:41.147 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.5096ms
2024-06-19 16:42:53.700 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - null 0
2024-06-19 16:42:53.765 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 16:42:53.786 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Authorization.Application.Requests.Comands.CreateJwtToken.CreateJwtTokenComand, MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 16:42:55.018 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Name] = N'Admin'
2024-06-19 16:42:55.115 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__adminRole_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
WHERE [a].[RoleId] = @__adminRole_Id_0
2024-06-19 16:42:55.233 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Login], [PasswordHash], [Phone])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-06-19 16:42:55.275 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUserAppRole] ([RoleId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-06-19 16:42:55.287 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-06-19 16:42:55.338 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__request_Login_0
2024-06-19 16:42:55.345 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-06-19 16:42:55.535 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-06-19 16:42:55.545 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.JwtTokenDto'.
2024-06-19 16:42:55.557 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 1767.9421ms
2024-06-19 16:42:55.557 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-06-19 16:42:55.564 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken?Login=admin&Password=12345678 - 200 null application/json; charset=utf-8 1864.0737ms
2024-06-19 16:43:10.928 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-06-19 16:43:10.975 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-06-19 16:43:10.981 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(MediatR.IMediator, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-06-19 16:43:11.213 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[Phone]
FROM [Users] AS [u]
WHERE [u].[Id] = @__request_Id_0
2024-06-19 16:43:11.220 +03:00 [INF] Executing OkObjectResult, writing value of type 'Authorization.dto.GetUserDto'.
2024-06-19 16:43:11.221 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 239.5265ms
2024-06-19 16:43:11.221 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-06-19 16:43:11.221 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 293.8109ms
