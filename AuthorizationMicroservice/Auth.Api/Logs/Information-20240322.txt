2024-03-22 15:06:21.397 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 15:06:22.635 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 15:06:22.635 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 15:06:22.730 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 15:06:22.732 +03:00 [INF] Hosting environment: Development
2024-03-22 15:06:22.732 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 15:06:27.283 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger - null null
2024-03-22 15:06:27.652 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger - 301 0 null 387.8284ms
2024-03-22 15:06:27.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 15:06:27.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 252.4441ms
2024-03-22 15:06:27.993 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/swagger-ui.css - null null
2024-03-22 15:06:27.994 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/swagger-ui-standalone-preset.js - null null
2024-03-22 15:06:27.996 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 15:06:27.997 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 15:06:27.997 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/swagger-ui-bundle.js - null null
2024-03-22 15:06:28.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 36.1023ms
2024-03-22 15:06:28.230 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-03-22 15:06:28.230 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-03-22 15:06:28.239 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 243.747ms
2024-03-22 15:06:28.240 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/swagger-ui.css - 200 143943 text/css 244.5195ms
2024-03-22 15:06:28.270 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-03-22 15:06:28.271 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 277.0409ms
2024-03-22 15:06:28.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 359.6142ms
2024-03-22 15:06:28.744 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 15:06:28.762 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/favicon-32x32.png - null null
2024-03-22 15:06:28.762 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-03-22 15:06:28.762 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/favicon-32x32.png - 200 628 image/png 1.0019ms
2024-03-22 15:06:29.056 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 311.8356ms
2024-03-22 15:07:03.315 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 62
2024-03-22 15:08:01.101 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 15:08:02.135 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 15:08:02.136 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 15:08:02.250 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 15:08:02.251 +03:00 [INF] Hosting environment: Development
2024-03-22 15:08:02.252 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 15:08:05.765 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 15:08:06.028 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 287.7763ms
2024-03-22 15:08:06.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 15:08:06.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 15:08:06.049 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 4.8791ms
2024-03-22 15:08:06.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 136.2514ms
2024-03-22 15:08:06.522 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 15:08:06.656 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 135.3323ms
2024-03-22 15:08:26.601 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 62
2024-03-22 15:08:26.714 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:08:26.782 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:08:33.414 +03:00 [INF] Executed DbCommand (177ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-03-22 15:08:33.711 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__auth_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__auth_Login_0
2024-03-22 15:08:33.770 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 15:08:34.036 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 15:08:34.076 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 15:08:34.094 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 7307.8167ms
2024-03-22 15:08:34.095 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:08:34.111 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 7510.5346ms
2024-03-22 15:09:35.560 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-03-22 15:09:35.606 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 15:09:35.611 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:09:35.701 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-22 15:09:35.714 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.UserGetDto'.
2024-03-22 15:09:35.715 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 103.9382ms
2024-03-22 15:09:35.715 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 15:09:35.716 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 157.6564ms
2024-03-22 15:12:47.834 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/RefreshJwtToken?jwtToken=1140C2D4-1F08-425F-96EB-197AECA41087 - null 0
2024-03-22 15:12:47.839 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:12:47.844 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(System.String, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:12:47.884 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refToken_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[Id] = @__refToken_0
2024-03-22 15:12:47.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentRefreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__currentRefreshToken_UserId_0
2024-03-22 15:12:47.899 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__user_Login_0
2024-03-22 15:12:47.903 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 15:12:47.914 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 15:12:47.916 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 15:12:47.916 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 71.7763ms
2024-03-22 15:12:47.916 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:12:47.916 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/RefreshJwtToken?jwtToken=1140C2D4-1F08-425F-96EB-197AECA41087 - 200 null application/json; charset=utf-8 82.328ms
2024-03-22 15:13:11.637 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-03-22 15:13:11.656 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-03-22 15:13:11.659 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-03-22 15:13:11.659 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 401 0 null 26.8378ms
2024-03-22 15:13:26.218 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/RefreshJwtToken?jwtToken=1140C2D4-1F08-425F-96EB-197AECA41087 - null 0
2024-03-22 15:13:26.223 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:13:26.224 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(System.String, System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:13:26.243 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refToken_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[UserId]
FROM [RefreshTokens] AS [r]
WHERE [r].[Id] = @__refToken_0
2024-03-22 15:13:26.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentRefreshToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__currentRefreshToken_UserId_0
2024-03-22 15:13:26.251 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__user_Login_0
2024-03-22 15:13:26.253 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 15:13:26.255 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 15:13:26.255 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 15:13:26.256 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 31.909ms
2024-03-22 15:13:26.256 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:13:26.256 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/RefreshJwtToken?jwtToken=1140C2D4-1F08-425F-96EB-197AECA41087 - 200 null application/json; charset=utf-8 38.8371ms
2024-03-22 15:13:46.041 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-03-22 15:13:46.042 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 15:13:46.043 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:13:46.060 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-22 15:13:46.070 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.UserGetDto'.
2024-03-22 15:13:46.070 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 27.2822ms
2024-03-22 15:13:46.071 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 15:13:46.072 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 30.598ms
2024-03-22 15:40:24.050 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IAutnService Lifetime: Transient ImplementationType: UserServices.AuthService': Unable to resolve service for type 'Common.Repository.IRepository`1[Common.Domain.AppUser]' while attempting to activate 'UserServices.AuthService'.)
2024-03-22 15:40:40.382 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IAutnService Lifetime: Transient ImplementationType: UserServices.AuthService': Unable to resolve service for type 'Common.Repository.IRepository`1[Common.Domain.AppUser]' while attempting to activate 'UserServices.AuthService'.)
2024-03-22 15:42:33.392 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: Auth.Api.Services.IAutnService Lifetime: Transient ImplementationType: Auth.Api.Services.AuthService': Unable to resolve service for type 'Common.Repository.IRepository`1[Common.Domain.AppUser]' while attempting to activate 'Auth.Api.Services.AuthService'.)
2024-03-22 15:42:40.212 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: Auth.Api.Services.IAutnService Lifetime: Transient ImplementationType: Auth.Api.Services.AuthService': Unable to resolve service for type 'Common.Repository.IRepository`1[Common.Domain.AppUser]' while attempting to activate 'Auth.Api.Services.AuthService'.)
2024-03-22 15:45:24.046 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 15:45:24.597 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 15:45:24.597 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 15:45:24.633 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 15:45:24.633 +03:00 [INF] Hosting environment: Development
2024-03-22 15:45:24.633 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 15:45:26.211 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 15:45:26.444 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 236.3705ms
2024-03-22 15:45:26.463 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 15:45:26.463 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 15:45:26.482 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 19.202ms
2024-03-22 15:45:26.536 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.2728ms
2024-03-22 15:45:26.593 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 15:45:26.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 89.237ms
2024-03-22 15:45:41.938 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 57
2024-03-22 15:45:42.690 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:45:42.710 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:45:43.213 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 499.6701ms
2024-03-22 15:45:43.213 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:45:43.216 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'UserServices.IUserService' while attempting to activate 'UserAPI.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-22 15:45:43.299 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 500 null text/plain; charset=utf-8 1361.5277ms
2024-03-22 15:46:51.047 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 15:46:51.319 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 15:46:51.319 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 15:46:51.360 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 15:46:51.361 +03:00 [INF] Hosting environment: Development
2024-03-22 15:46:51.362 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 15:46:52.441 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 15:46:52.609 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 171.9939ms
2024-03-22 15:46:52.628 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 15:46:52.628 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 15:46:52.634 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 7.6543ms
2024-03-22 15:46:52.671 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.3837ms
2024-03-22 15:46:52.731 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 15:46:52.822 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.7814ms
2024-03-22 15:47:07.540 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 62
2024-03-22 15:47:07.605 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:47:07.629 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:47:07.765 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 133.22ms
2024-03-22 15:47:07.766 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:47:07.768 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'UserServices.IUserService' while attempting to activate 'UserAPI.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-22 15:47:07.795 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 500 null text/plain; charset=utf-8 255.9107ms
2024-03-22 15:47:48.938 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'UserServices.UserService'.)
2024-03-22 15:47:59.495 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'UserServices.UserService'.)
2024-03-22 15:48:32.753 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'UserServices.UserService'.)
2024-03-22 15:49:21.789 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 15:49:22.110 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 15:49:22.110 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 15:49:22.155 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 15:49:22.156 +03:00 [INF] Hosting environment: Development
2024-03-22 15:49:22.156 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 15:49:23.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 15:49:23.286 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 196.8908ms
2024-03-22 15:49:23.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 15:49:23.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 15:49:23.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 6.3445ms
2024-03-22 15:49:23.349 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.5571ms
2024-03-22 15:49:23.419 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 15:49:23.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.4447ms
2024-03-22 15:50:02.366 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 15:50:02.734 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 15:50:02.734 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 15:50:02.778 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 15:50:02.778 +03:00 [INF] Hosting environment: Development
2024-03-22 15:50:02.778 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 15:50:03.799 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 15:50:03.968 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 174.6566ms
2024-03-22 15:50:03.984 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 15:50:03.984 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 15:50:03.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 4.7289ms
2024-03-22 15:50:04.033 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.9246ms
2024-03-22 15:50:04.102 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 15:50:04.195 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.7884ms
2024-03-22 15:50:36.296 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 62
2024-03-22 15:50:37.024 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:50:37.047 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:50:40.074 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-03-22 15:50:40.187 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__auth_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__auth_Login_0
2024-03-22 15:50:40.211 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 15:50:40.360 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 15:50:40.382 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 15:50:40.390 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 3340.26ms
2024-03-22 15:50:40.390 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:50:40.396 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 4100.2374ms
2024-03-22 15:51:05.629 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-03-22 15:51:05.679 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 15:51:05.683 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:51:05.734 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-22 15:51:05.740 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.UserGetDto'.
2024-03-22 15:51:05.741 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 58.0886ms
2024-03-22 15:51:05.741 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 15:51:05.742 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 113.5144ms
2024-03-22 15:52:57.440 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 15:52:57.733 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 15:52:57.733 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 15:52:57.785 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 15:52:57.785 +03:00 [INF] Hosting environment: Development
2024-03-22 15:52:57.785 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 15:52:58.888 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 15:52:59.059 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 176.5403ms
2024-03-22 15:52:59.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 15:52:59.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 15:52:59.078 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 5.2098ms
2024-03-22 15:52:59.117 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.3598ms
2024-03-22 15:52:59.181 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 15:52:59.272 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 91.4485ms
2024-03-22 15:53:18.175 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 62
2024-03-22 15:53:18.239 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:53:18.261 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:53:19.581 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-03-22 15:53:19.687 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__auth_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__auth_Login_0
2024-03-22 15:53:19.709 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 15:53:19.842 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 15:53:19.867 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 15:53:19.875 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 1611.5325ms
2024-03-22 15:53:19.875 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 15:53:19.881 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 1706.396ms
2024-03-22 15:53:38.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-03-22 15:53:38.059 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 15:53:38.064 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 15:53:38.114 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-22 15:53:38.121 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.UserGetDto'.
2024-03-22 15:53:38.122 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 57.8497ms
2024-03-22 15:53:38.122 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 15:53:38.122 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 102.8402ms
2024-03-22 17:00:08.737 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 17:00:09.052 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 17:00:09.052 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 17:00:09.091 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 17:00:09.091 +03:00 [INF] Hosting environment: Development
2024-03-22 17:00:09.091 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 17:00:10.385 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 17:00:10.556 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 178.0892ms
2024-03-22 17:00:10.575 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 17:00:10.575 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 17:00:10.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 6.3324ms
2024-03-22 17:00:10.633 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.4646ms
2024-03-22 17:00:10.696 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 17:00:10.805 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.0244ms
2024-03-22 17:00:29.731 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 59
2024-03-22 17:00:29.795 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 17:00:29.815 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 17:00:30.945 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-22 17:00:31.156 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-03-22 17:00:31.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__auth_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__auth_Login_0
2024-03-22 17:00:31.245 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 17:00:31.384 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 17:00:31.412 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 17:00:31.420 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 1602.5664ms
2024-03-22 17:00:31.420 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 17:00:31.428 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 1697.7468ms
2024-03-22 17:00:59.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-03-22 17:00:59.348 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 17:00:59.352 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 17:00:59.393 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-22 17:00:59.402 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-22 17:00:59.937 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 584.8965ms
2024-03-22 17:00:59.937 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 17:00:59.939 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.BL.NotFoundExeption: Not found by filter: {"Id":0}
   at UserServices.UserService.GetByIdOrDefaultAsync(Int32 id, CancellationToken token) in D:\учёба\курсы ITA\1 - ToDo\User.Service\UserService.cs:line 88
   at UserAPI.Controllers.AuthController.GetMyInfo(CancellationToken cancellationToken) in D:\учёба\курсы ITA\1 - ToDo\Auth.Api\Controllers\AuthController.cs:line 43
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-22 17:00:59.979 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 500 null text/plain; charset=utf-8 676.1056ms
2024-03-22 17:04:48.308 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 17:04:48.523 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 17:04:48.523 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 17:04:48.560 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 17:04:48.560 +03:00 [INF] Hosting environment: Development
2024-03-22 17:04:48.560 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 17:04:49.858 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 17:04:50.018 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 163.2089ms
2024-03-22 17:04:50.037 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 17:04:50.037 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 17:04:50.043 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 5.651ms
2024-03-22 17:04:50.092 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.3611ms
2024-03-22 17:04:50.149 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 17:04:50.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 139.3736ms
2024-03-22 17:05:04.582 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 48
2024-03-22 17:05:05.314 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 17:05:05.334 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Auth.Api.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 17:05:07.027 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-22 17:05:07.287 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-03-22 17:05:07.338 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__auth_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__auth_Login_0
2024-03-22 17:05:07.363 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 17:05:07.509 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 17:05:07.540 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 17:05:07.549 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 2211.9064ms
2024-03-22 17:05:07.549 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 17:05:07.556 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 2974.6393ms
2024-03-22 17:05:25.843 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - null null
2024-03-22 17:05:25.882 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 17:05:25.886 +03:00 [INF] Route matched with {action = "GetMyInfo", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyInfo(System.Threading.CancellationToken) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 17:05:25.927 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-22 17:05:25.935 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-22 17:05:25.937 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.UserGetDto'.
2024-03-22 17:05:25.938 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api) in 52.1084ms
2024-03-22 17:05:25.938 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.GetMyInfo (Auth.Api)'
2024-03-22 17:05:25.938 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/Auth/GetMyInfo - 200 null application/json; charset=utf-8 95.2411ms
2024-03-22 18:23:08.028 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'Common.Api.Service.ICurrentUserService' while attempting to activate 'UserServices.UserService'.)
2024-03-22 18:23:21.500 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'Common.Api.Service.ICurrentUserService' while attempting to activate 'UserServices.UserService'.)
2024-03-22 18:24:46.781 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'Common.Api.Service.ICurrentUserService' while attempting to activate 'UserServices.UserService'.)
2024-03-22 18:24:56.177 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'Common.Api.Service.ICurrentUserService' while attempting to activate 'UserServices.UserService'.)
2024-03-22 18:25:32.319 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'Microsoft.AspNetCore.Http.IHttpContextAccessor' while attempting to activate 'Common.Api.Service.CurrentUserService'.) (Error while validating the service descriptor 'ServiceType: Common.Api.Service.ICurrentUserService Lifetime: Transient ImplementationType: Common.Api.Service.CurrentUserService': Unable to resolve service for type 'Microsoft.AspNetCore.Http.IHttpContextAccessor' while attempting to activate 'Common.Api.Service.CurrentUserService'.)
2024-03-22 18:32:17.681 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 18:32:18.093 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 18:32:18.093 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 18:32:18.129 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 18:32:18.130 +03:00 [INF] Hosting environment: Development
2024-03-22 18:32:18.130 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 18:32:19.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 18:32:19.485 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 164.4773ms
2024-03-22 18:32:19.503 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 18:32:19.503 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 18:32:19.507 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 4.4299ms
2024-03-22 18:32:19.547 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.6684ms
2024-03-22 18:32:19.612 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 18:32:19.691 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 79.8291ms
2024-03-22 18:32:31.897 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 48
2024-03-22 18:32:31.969 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 18:32:31.989 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Auth.Api.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 18:32:33.973 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-22 18:32:34.192 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-03-22 18:32:34.251 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__auth_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__auth_Login_0
2024-03-22 18:32:34.276 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 18:32:34.403 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 18:32:34.427 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 18:32:34.435 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 2442.6917ms
2024-03-22 18:32:34.436 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 18:32:34.443 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 2546.0748ms
2024-03-22 18:44:58.607 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 18:44:58.900 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 18:44:58.900 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 18:44:58.949 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 18:44:58.949 +03:00 [INF] Hosting environment: Development
2024-03-22 18:44:58.949 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 18:45:00.150 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 18:45:00.378 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 232.6403ms
2024-03-22 18:45:00.417 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 18:45:00.417 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 18:45:00.426 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 8.82ms
2024-03-22 18:45:00.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.7291ms
2024-03-22 18:45:00.545 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 18:45:00.640 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.7426ms
2024-03-22 18:45:17.200 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 48
2024-03-22 18:45:17.268 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 18:45:17.288 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Auth.Api.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 18:45:18.390 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-22 18:45:18.596 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-03-22 18:45:18.652 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__auth_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__auth_Login_0
2024-03-22 18:45:18.678 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 18:45:18.804 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 18:45:18.828 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 18:45:18.836 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 1545.0217ms
2024-03-22 18:45:18.836 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 18:45:18.842 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 1642.8665ms
2024-03-22 18:51:33.568 +03:00 [INF] User profile is available. Using 'C:\Users\vitia\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-22 18:51:33.874 +03:00 [INF] Now listening on: https://localhost:7104
2024-03-22 18:51:33.874 +03:00 [INF] Now listening on: http://localhost:5148
2024-03-22 18:51:33.935 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-22 18:51:33.935 +03:00 [INF] Hosting environment: Development
2024-03-22 18:51:33.936 +03:00 [INF] Content root path: D:\учёба\курсы ITA\1 - ToDo\Auth.Api
2024-03-22 18:51:34.799 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/index.html - null null
2024-03-22 18:51:34.966 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/index.html - 200 null text/html;charset=utf-8 175.2864ms
2024-03-22 18:51:34.986 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_vs/browserLink - null null
2024-03-22 18:51:34.986 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - null null
2024-03-22 18:51:34.991 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 4.7617ms
2024-03-22 18:51:35.028 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.0714ms
2024-03-22 18:51:35.101 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - null null
2024-03-22 18:51:35.198 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7104/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.2101ms
2024-03-22 18:51:46.176 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - application/json 48
2024-03-22 18:51:46.243 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 18:51:46.266 +03:00 [INF] Route matched with {action = "Post", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Auth.Api.dto.AuthDto) on controller UserAPI.Controllers.AuthController (Auth.Api).
2024-03-22 18:51:47.399 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-22 18:51:47.611 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Login] = @__Trim_0
2024-03-22 18:51:47.667 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__auth_Login_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[RoleId], [a].[UserId]
FROM [AppUserAppRole] AS [a]
INNER JOIN [Users] AS [u] ON [a].[UserId] = [u].[Id]
WHERE [u].[Login] = @__auth_Login_0
2024-03-22 18:51:47.694 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__role_RoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Name]
FROM [AppUserRole] AS [a]
WHERE [a].[Id] = @__role_RoleId_0
2024-03-22 18:51:47.830 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-22 18:51:47.854 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserServices.dto.JwtTokenDto'.
2024-03-22 18:51:47.863 +03:00 [INF] Executed action UserAPI.Controllers.AuthController.Post (Auth.Api) in 1593.9669ms
2024-03-22 18:51:47.863 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.AuthController.Post (Auth.Api)'
2024-03-22 18:51:47.870 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7104/Auth/CreateJwtToken - 200 null application/json; charset=utf-8 1693.6997ms
